<style>
  #shopify-section-{{ section.id }} .collecton-vertical-tabs {padding-top: {{ section.settings.padding_top }}px;padding-bottom: {{ section.settings.padding_bottom }}px;}
  .collecton-vertical-tabs h2{  line-height:56px;font-size: 46px; text-align:center}
  .tabs-container {
    margin-top: 60px;
    display: flex;
    flex-direction: row-reverse;
    gap: 50px;
  }

  .tabs-nav {
    display: flex;
    flex-direction: column;
    gap: 50px;
    max-width: 560px;
  }

  .tab-button {
    padding: 0px 20px;
    color: #B7B7B7;
    border: none;
    text-align: left;
    cursor: pointer;
    transition: all 0.3s ease;
    border-left: 2px solid #B7B7B7;
  }

  .tab-button:hover {
    color: #000;
  }

  .tab-button.active {
    background: #fff;
    border-left: 2px solid #000;
    font-weight: bold;
  }
  .tab-title{
    line-height:44px;
    font-size:36px;
    font-weight: 600;
  }
  .tab-detail{
    line-height:25px;
    font-size: 18px;
    font-weight: 400;
  }
  .tab-detail p{ margin-bottom:4px}
  .collecton-vertical-tabs .image-container {height: 600px;position: relative;}
  .collecton-vertical-tabs .image-container img {
    position: absolute;
    top: 0px;
    left: 0px;
    width: 100%;
    height: 100%;
    border-radius:12px
  }
  .tabs-content {
    flex: 1;
    min-width:450px
  }

  .tab-pane {
    display: none;
  }

  .tab-pane.active {
    display: block;
    animation: fadeIn 0.5s ease;
  }

  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }
  .show-pc{display: block;}
  .show-mobile{display: none;}
  @media (max-width: 920px) {
    .collecton-vertical-tabs .image-container{height:552px}
    .tab-title{line-height: 32px;font-size: 28px;}
    .tab-detail {line-height: 22px;font-size: 14px;}
    .tab-detail p{margin-top:0px}
  }
  @media (max-width:820px) {
    .collecton-vertical-tabs .image-container{height:676px}
    .tabs-nav,.tabs-container{gap:20px}
    .tab-title{line-height: 32px;font-size: 28px;}
    .tab-detail {line-height: 22px;font-size: 14px;}
    .tab-detail p{margin-top:0px}
  }
  /* 移动端样式 */
  @media (max-width: 767.98px) {
    #shopify-section-{{ section.id }} .collecton-vertical-tabs {padding-top: {{ section.settings.padding_top | divided_by: 2 }}px;padding-bottom: {{ section.settings.padding_bottom | divided_by: 2 }}px;}
    .collecton-vertical-tabs h2{ line-height:34px;font-size:28px;padding: 0px 1.6rem;}
    .show-pc{display: none;}
    .show-mobile{display: block;}
    .tabs-container {
      margin-top:27px;
      flex-direction: column;
      gap: 20px;
    }
    .tabs-content{ min-width: 100%;}
    .tab-detail p{ margin: 0rem 0px 2rem;line-height: 17px; font-size: 14px; color: #666;}
    .tabs-nav {
      flex-direction: row;
      justify-content:center;
      overflow-x: auto;
      max-width: 100%;
      gap:1.6rem;
      border-bottom: 1px solid #B7B7B7;
    }
   
    .tab-button {
      white-space: initial;
      border-left: none;
      padding:0px;
      padding-bottom: 5px;
      border-bottom: none
    }
 
    .tab-button.active {
      border-left: none;
      border-bottom: 1px solid #161616;
      color:#000
    }
    .collecton-vertical-tabs .image-container{height:338px}
    .tab-title{line-height:17px;font-size:14px;text-align:center}
    .tab-button .tab-detail{display:none}
  }
</style>
{%- liquid
  assign motion_delay = 0
  if section.settings.title != blank
    assign motion_delay = motion_delay | plus: 50
  endif
-%}
<div class="section section--padding  page-width collecton-vertical-tabs" >
  <h2>
     <motion-element class="block" data-motion="fade-up" data-motion-delay="{{ motion_delay }}">  <span>{{ section.settings.title }}</span></motion-element>
  </h2>
<div class="tabs-container">
  <div class="tabs-nav">
    {% for block in section.blocks %}
      <div class="tab-button {% if forloop.first %}active{% endif %}" 
              data-tab="tab-{{ forloop.index }}">
        <div class="tab-title">{{ block.settings.tab_title }}</div>
         {% if block.settings.tab_text != blank %}
          <div class="tab-detail show-pc">{{ block.settings.tab_text }}</div>
        {% endif %}
      </div>
    {% endfor %}
  </div>
  
  <div class="tabs-content">
    {% for block in section.blocks %}
      <div class="tab-pane {% if forloop.first %}active{% endif %}" 
           id="tab-{{ forloop.index }}">
          <div class="tab-detail show-mobile">{{ block.settings.tab_text }}</div>
          <div class="image-container">
           {% if block.settings.image != blank %}
                  <picture>
                    <!-- 移动端图片 -->
                    <source
                      media="(max-width: 749px)"
                      srcset="
                        {{ block.settings.mobile_image | img_url: '800x' }} 1x,
                        {{ block.settings.mobile_image | img_url: '1600x' }} 2x
                      "
                    >

                    <!-- 桌面端图片 -->
                    <source
                      media="(min-width: 750px)"
                      srcset="
                        {{ block.settings.image | img_url: '1200x' }} 1x,
                        {{ block.settings.image | img_url: '2400x' }} 2x
                      "
                    >

                    <!-- 默认图片 -->
                    <img
                      src="{{ block.settings.image | img_url: '1200x' }}"
                      alt="{{ block.settings.title | escape }}"
                      class="grid-image"
                      loading="lazy"
                      width="{{ block.settings.image.width }}"
                      height="{{ block.settings.image.height }}"
                    >
                  </picture>
                {% else %}
                  {{ 'image' | placeholder_svg_tag: 'placeholder-svg' }}
                {% endif %}
              </div>
      </div>
    {% endfor %}
  </div>
</div>
</div>
<script>
 // PC端 hover 效果
  if (window.innerWidth > 767) {
    document.querySelectorAll('.tab-button').forEach(button => {
      button.addEventListener('mouseenter', () => {
        document.querySelectorAll('.tab-button').forEach(btn => {
          btn.classList.remove('active');
        });
        document.querySelectorAll('.tab-pane').forEach(pane => {
          pane.classList.remove('active');
        });
        
        button.classList.add('active');
        const tabId = button.getAttribute('data-tab');
        document.getElementById(tabId).classList.add('active');
      });
    });
  } else {
    // 移动端点击效果
    document.querySelectorAll('.tab-button').forEach(button => {
      button.addEventListener('click', () => {
        document.querySelectorAll('.tab-button').forEach(btn => {
          btn.classList.remove('active');
        });
        document.querySelectorAll('.tab-pane').forEach(pane => {
          pane.classList.remove('active');
        });
        
        button.classList.add('active');
        const tabId = button.getAttribute('data-tab');
        document.getElementById(tabId).classList.add('active');
      });
    });
  }

  // 处理窗口大小变化
  window.addEventListener('resize', function() {
    if (window.innerWidth > 767) {
      // 移除移动端的点击事件
      document.querySelectorAll('.tab-button').forEach(button => {
        button.replaceWith(button.cloneNode(true));
      });
      
      // 重新绑定PC端的hover事件
      document.querySelectorAll('.tab-button').forEach(button => {
        button.addEventListener('mouseenter', hoverHandler);
      });
    }
  });

  function hoverHandler() {
    document.querySelectorAll('.tab-button').forEach(btn => {
      btn.classList.remove('active');
    });
    document.querySelectorAll('.tab-pane').forEach(pane => {
      pane.classList.remove('active');
    });
    
    this.classList.add('active');
    const tabId = this.getAttribute('data-tab');
    document.getElementById(tabId).classList.add('active');
  }
</script>
{% schema %}
{
  "name": "bk1600-水平Tabs",
  "class": "section",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "标题",
      "default": "Für den Balkon, zu Hause und sogar im Freien"
    },
     {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 120,
      "step": 2,
      "unit": "px",
      "label": "t:sections.all.padding.padding_top",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 120,
      "step": 2,
      "unit": "px",
      "label": "t:sections.all.padding.padding_bottom",
      "default": 0
    },
  ],
  "blocks": [
    {
      "type": "tab",
      "name": "Tab项",
      "settings": [
        {
          "type": "text",
          "id": "tab_title",
          "label": "Tab标题",
          "default": "标签标题"
        },
        {
          "type": "image_picker",
          "id": "image",
          "label": "图片"
        },
        {
          "type": "image_picker",
          "id": "mobile_image",
          "label": "移动端图片"
        },
        {
          "type": "richtext",
          "id": "tab_text",
          "label": "Tab文本内容"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "bk1600-水平Tabs",
      "category": "自定义产品组件"
    }
  ]
}
{% endschema %}
